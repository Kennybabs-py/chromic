/*! For license information please see main.5ff9921b065b9e12773d.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatechromic("main",{"./app/components/Canvas/Home/index.js":(t,e,s)=>{s.r(e),s.d(e,{default:()=>a});var i=s("./node_modules/lodash/map.js"),r=s.n(i),h=s("./node_modules/ogl/src/core/Transform.js"),l=s("./node_modules/ogl/src/extras/Plane.js"),o=s("./node_modules/gsap/index.js"),n=(s("./node_modules/normalize-wheel/index.js"),s("./app/components/Canvas/Home/Media.js"));class a{constructor({gl:t,scene:e,sizes:s}){this.gl=t,this.scene=e,this.group=new h.Transform,this.sizes=s,this.galleryElement=document.querySelector(".home__gallery"),this.mediaElements=document.querySelectorAll(".home__gallery__media__image"),this.x={current:0,target:0,lerp:.1,direction:null},this.y={current:0,target:0,lerp:.1,direction:null},this.scrollCurrent={x:0,y:0},this.scroll={x:0,y:0},this.speed={current:0,target:0,lerp:.1},this.createGeometry(),this.createGallery(),this.group.setParent(this.scene),this.show()}createGeometry(){this.geometry=new l.Plane(this.gl,{heightSegments:20,widthSegments:20})}createGallery(){this.medias=r()(this.mediaElements,((t,e)=>new n.default({element:t,index:e,geometry:this.geometry,gl:this.gl,scene:this.group,sizes:this.sizes})))}show(){r()(this.medias,(t=>{t.show()}))}hide(){r()(this.medias,(t=>{t.hide()}))}onResize(t){this.galleryBounds=this.galleryElement.getBoundingClientRect(),this.sizes=t.sizes,this.gallerySizes={width:this.galleryBounds.width/window.innerWidth*this.sizes.width,height:this.galleryBounds.height/window.innerHeight*this.sizes.height},r()(this.medias,(e=>{e.onResize(t,this.scroll)}))}onTouchDown({x:t,y:e}){this.scrollCurrent.x=this.scroll.x,this.scrollCurrent.y=this.scroll.y}onTouchMove({x:t,y:e}){const s=t.start-t.end,i=e.start-e.end;this.x.target=this.scrollCurrent.x-s,this.y.target=this.scrollCurrent.y-i}onTouchUp({x:t,y:e}){}onWheel({pixelY:t,pixelX:e}){this.x.target+=e,this.y.target+=t}update(){if(!this.galleryBounds)return;const t=this.x.target-this.x.current,e=this.y.target-this.y.current;this.speed.target=.001*Math.sqrt(t*t+e*e),this.speed.current=o.default.utils.interpolate(this.speed.current,this.speed.target,this.speed.lerp),this.x.current=o.default.utils.interpolate(this.x.current,this.x.target,this.x.lerp),this.y.current=o.default.utils.interpolate(this.y.current,this.y.target,this.y.lerp),this.scroll.x<this.x.current?this.x.direction="right":this.scroll.x>this.x.current&&(this.x.direction="left"),this.scroll.y<this.y.current?this.y.direction="top":this.scroll.y>this.y.current&&(this.y.direction="bottom"),this.scroll.x=this.x.current,this.scroll.y=this.y.current,r()(this.medias,((t,e)=>{const s=t.mesh.scale.x/2;if("left"===this.x.direction){t.mesh.position.x+s<-this.sizes.width/2&&(t.extra.x+=this.gallerySizes.width,t.mesh.rotation.z=o.default.utils.random(.03*-Math.PI,.03*Math.PI))}else if("right"===this.x.direction){t.mesh.position.x-s>this.sizes.width/2&&(t.extra.x-=this.gallerySizes.width,t.mesh.rotation.z=o.default.utils.random(.03*-Math.PI,.03*Math.PI))}const i=t.mesh.scale.y/2;if("top"===this.y.direction){t.mesh.position.y+i<-this.sizes.height/2&&(t.extra.y+=this.gallerySizes.height,t.mesh.rotation.z=o.default.utils.random(.03*-Math.PI,.03*Math.PI))}else if("bottom"===this.y.direction){t.mesh.position.y-i>this.sizes.height/2&&(t.extra.y-=this.gallerySizes.height,t.mesh.rotation.z=o.default.utils.random(.03*-Math.PI,.03*Math.PI))}t.update(this.scroll,this.speed.current)}))}destroy(){this.scene.removeChild(this.group)}}}},(function(t){t.h=()=>"e2a01e6905a8f7ad5476"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi41ZmY5OTIxYjA2NWI5ZTEyNzczZC5ob3QtdXBkYXRlLmpzIiwibWFwcGluZ3MiOiI7aVpBTWUsTUFBTUEsRUFDbkJDLFdBQUFBLEVBQVksR0FBRUMsRUFBRSxNQUFFQyxFQUFLLE1BQUVDLElBQ3ZCQyxLQUFLSCxHQUFLQSxFQUNWRyxLQUFLRixNQUFRQSxFQUNiRSxLQUFLQyxNQUFRLElBQUlDLEVBQUFBLFVBQ2pCRixLQUFLRCxNQUFRQSxFQUViQyxLQUFLRyxlQUFpQkMsU0FBU0MsY0FBYyxrQkFDN0NMLEtBQUtNLGNBQWdCRixTQUFTRyxpQkFDNUIsZ0NBRUZQLEtBQUtRLEVBQUksQ0FDUEMsUUFBUyxFQUNUQyxPQUFRLEVBQ1JDLEtBQU0sR0FDTkMsVUFBVyxNQUViWixLQUFLYSxFQUFJLENBQ1BKLFFBQVMsRUFDVEMsT0FBUSxFQUNSQyxLQUFNLEdBQ05DLFVBQVcsTUFLYlosS0FBS2MsY0FBZ0IsQ0FDbkJOLEVBQUcsRUFDSEssRUFBRyxHQUVMYixLQUFLZSxPQUFTLENBQ1pQLEVBQUcsRUFDSEssRUFBRyxHQUlMYixLQUFLZ0IsTUFBUSxDQUNYUCxRQUFTLEVBQ1RDLE9BQVEsRUFDUkMsS0FBTSxJQUdSWCxLQUFLaUIsaUJBQ0xqQixLQUFLa0IsZ0JBRUxsQixLQUFLQyxNQUFNa0IsVUFBVW5CLEtBQUtGLE9BQzFCRSxLQUFLb0IsTUFDUCxDQUVBSCxjQUFBQSxHQUVFakIsS0FBS3FCLFNBQVcsSUFBSUMsRUFBQUEsTUFBTXRCLEtBQUtILEdBQUksQ0FDakMwQixlQUFnQixHQUNoQkMsY0FBZSxJQUVuQixDQUNBTixhQUFBQSxHQUNFbEIsS0FBS3lCLE9BQVNDLElBQUkxQixLQUFLTSxlQUFlLENBQUNxQixFQUFTQyxJQUN2QyxJQUFJQyxFQUFBQSxRQUFNLENBQ2ZGLFFBQVNBLEVBQ1RDLE1BQU9BLEVBQ1BQLFNBQVVyQixLQUFLcUIsU0FDZnhCLEdBQUlHLEtBQUtILEdBQ1RDLE1BQU9FLEtBQUtDLE1BQ1pGLE1BQU9DLEtBQUtELFNBR2xCLENBRUFxQixJQUFBQSxHQUNFTSxJQUFJMUIsS0FBS3lCLFFBQVNLLElBQ2hCQSxFQUFNVixNQUFNLEdBRWhCLENBRUFXLElBQUFBLEdBQ0VMLElBQUkxQixLQUFLeUIsUUFBU0ssSUFDaEJBLEVBQU1DLE1BQU0sR0FFaEIsQ0FFQUMsUUFBQUEsQ0FBU0MsR0FDUGpDLEtBQUtrQyxjQUFnQmxDLEtBQUtHLGVBQWVnQyx3QkFDekNuQyxLQUFLRCxNQUFRa0MsRUFBTWxDLE1BQ25CQyxLQUFLb0MsYUFBZSxDQUNsQkMsTUFBUXJDLEtBQUtrQyxjQUFjRyxNQUFRQyxPQUFPQyxXQUFjdkMsS0FBS0QsTUFBTXNDLE1BQ25FRyxPQUNHeEMsS0FBS2tDLGNBQWNNLE9BQVNGLE9BQU9HLFlBQWV6QyxLQUFLRCxNQUFNeUMsUUFNbEVkLElBQUkxQixLQUFLeUIsUUFBU0ssSUFDaEJBLEVBQU1FLFNBQVNDLEVBQU9qQyxLQUFLZSxPQUFPLEdBRXRDLENBT0EyQixXQUFBQSxFQUFZLEVBQUVsQyxFQUFDLEVBQUVLLElBQ2ZiLEtBQUtjLGNBQWNOLEVBQUlSLEtBQUtlLE9BQU9QLEVBQ25DUixLQUFLYyxjQUFjRCxFQUFJYixLQUFLZSxPQUFPRixDQUNyQyxDQU1BOEIsV0FBQUEsRUFBWSxFQUFFbkMsRUFBQyxFQUFFSyxJQUNmLE1BQU0rQixFQUFZcEMsRUFBRXFDLE1BQVFyQyxFQUFFc0MsSUFDeEJDLEVBQVlsQyxFQUFFZ0MsTUFBUWhDLEVBQUVpQyxJQUU5QjlDLEtBQUtRLEVBQUVFLE9BQVNWLEtBQUtjLGNBQWNOLEVBQUlvQyxFQUN2QzVDLEtBQUthLEVBQUVILE9BQVNWLEtBQUtjLGNBQWNELEVBQUlrQyxDQUN6QyxDQU1BQyxTQUFBQSxFQUFVLEVBQUV4QyxFQUFDLEVBQUVLLElBQU0sQ0FFckJvQyxPQUFBQSxFQUFRLE9BQUVDLEVBQU0sT0FBRUMsSUFDaEJuRCxLQUFLUSxFQUFFRSxRQUFVeUMsRUFDakJuRCxLQUFLYSxFQUFFSCxRQUFVd0MsQ0FDbkIsQ0FPQUUsTUFBQUEsR0FDRSxJQUFLcEQsS0FBS2tDLGNBQWUsT0FJekIsTUFBTW1CLEVBQUlyRCxLQUFLUSxFQUFFRSxPQUFTVixLQUFLUSxFQUFFQyxRQUMzQjZDLEVBQUl0RCxLQUFLYSxFQUFFSCxPQUFTVixLQUFLYSxFQUFFSixRQUNqQ1QsS0FBS2dCLE1BQU1OLE9BQW9DLEtBQTNCNkMsS0FBS0MsS0FBS0gsRUFBSUEsRUFBSUMsRUFBSUEsR0FFMUN0RCxLQUFLZ0IsTUFBTVAsUUFBVWdELEVBQUFBLFFBQUtDLE1BQU1DLFlBQzlCM0QsS0FBS2dCLE1BQU1QLFFBQ1hULEtBQUtnQixNQUFNTixPQUNYVixLQUFLZ0IsTUFBTUwsTUFJYlgsS0FBS1EsRUFBRUMsUUFBVWdELEVBQUFBLFFBQUtDLE1BQU1DLFlBQzFCM0QsS0FBS1EsRUFBRUMsUUFDUFQsS0FBS1EsRUFBRUUsT0FDUFYsS0FBS1EsRUFBRUcsTUFFVFgsS0FBS2EsRUFBRUosUUFBVWdELEVBQUFBLFFBQUtDLE1BQU1DLFlBQzFCM0QsS0FBS2EsRUFBRUosUUFDUFQsS0FBS2EsRUFBRUgsT0FDUFYsS0FBS2EsRUFBRUYsTUFJTFgsS0FBS2UsT0FBT1AsRUFBSVIsS0FBS1EsRUFBRUMsUUFDekJULEtBQUtRLEVBQUVJLFVBQVksUUFDVlosS0FBS2UsT0FBT1AsRUFBSVIsS0FBS1EsRUFBRUMsVUFDaENULEtBQUtRLEVBQUVJLFVBQVksUUFHakJaLEtBQUtlLE9BQU9GLEVBQUliLEtBQUthLEVBQUVKLFFBQ3pCVCxLQUFLYSxFQUFFRCxVQUFZLE1BQ1ZaLEtBQUtlLE9BQU9GLEVBQUliLEtBQUthLEVBQUVKLFVBQ2hDVCxLQUFLYSxFQUFFRCxVQUFZLFVBSXJCWixLQUFLZSxPQUFPUCxFQUFJUixLQUFLUSxFQUFFQyxRQUN2QlQsS0FBS2UsT0FBT0YsRUFBSWIsS0FBS2EsRUFBRUosUUFFdkJpQixJQUFJMUIsS0FBS3lCLFFBQVEsQ0FBQ0ssRUFBTzhCLEtBQ3ZCLE1BQU1DLEVBQWEvQixFQUFNZ0MsS0FBS0MsTUFBTXZELEVBQUksRUFHeEMsR0FBeUIsU0FBckJSLEtBQUtRLEVBQUVJLFVBQXNCLENBQ3JCa0IsRUFBTWdDLEtBQUtFLFNBQVN4RCxFQUFJcUQsR0FDekI3RCxLQUFLRCxNQUFNc0MsTUFBUSxJQUMxQlAsRUFBTW1DLE1BQU16RCxHQUFLUixLQUFLb0MsYUFBYUMsTUFDbkNQLEVBQU1nQyxLQUFLSSxTQUFTQyxFQUFJVixFQUFBQSxRQUFLQyxNQUFNVSxPQUN0QixLQUFWYixLQUFLYyxHQUNJLElBQVZkLEtBQUtjLElBR1gsTUFBTyxHQUF5QixVQUFyQnJFLEtBQUtRLEVBQUVJLFVBQXVCLENBQzdCa0IsRUFBTWdDLEtBQUtFLFNBQVN4RCxFQUFJcUQsRUFFMUI3RCxLQUFLRCxNQUFNc0MsTUFBUSxJQUN6QlAsRUFBTW1DLE1BQU16RCxHQUFLUixLQUFLb0MsYUFBYUMsTUFDbkNQLEVBQU1nQyxLQUFLSSxTQUFTQyxFQUFJVixFQUFBQSxRQUFLQyxNQUFNVSxPQUN0QixLQUFWYixLQUFLYyxHQUNJLElBQVZkLEtBQUtjLElBR1gsQ0FFQSxNQUFNQyxFQUFheEMsRUFBTWdDLEtBQUtDLE1BQU1sRCxFQUFJLEVBRXhDLEdBQXlCLFFBQXJCYixLQUFLYSxFQUFFRCxVQUFxQixDQUNwQmtCLEVBQU1nQyxLQUFLRSxTQUFTbkQsRUFBSXlELEdBRXpCdEUsS0FBS0QsTUFBTXlDLE9BQVMsSUFDM0JWLEVBQU1tQyxNQUFNcEQsR0FBS2IsS0FBS29DLGFBQWFJLE9BQ25DVixFQUFNZ0MsS0FBS0ksU0FBU0MsRUFBSVYsRUFBQUEsUUFBS0MsTUFBTVUsT0FDdEIsS0FBVmIsS0FBS2MsR0FDSSxJQUFWZCxLQUFLYyxJQUdYLE1BQU8sR0FBeUIsV0FBckJyRSxLQUFLYSxFQUFFRCxVQUF3QixDQUM5QmtCLEVBQU1nQyxLQUFLRSxTQUFTbkQsRUFBSXlELEVBRTFCdEUsS0FBS0QsTUFBTXlDLE9BQVMsSUFDMUJWLEVBQU1tQyxNQUFNcEQsR0FBS2IsS0FBS29DLGFBQWFJLE9BQ25DVixFQUFNZ0MsS0FBS0ksU0FBU0MsRUFBSVYsRUFBQUEsUUFBS0MsTUFBTVUsT0FDdEIsS0FBVmIsS0FBS2MsR0FDSSxJQUFWZCxLQUFLYyxJQUdYLENBRUF2QyxFQUFNc0IsT0FBT3BELEtBQUtlLE9BQVFmLEtBQUtnQixNQUFNUCxRQUFRLEdBRWpELENBRUE4RCxPQUFBQSxHQUNFdkUsS0FBS0YsTUFBTTBFLFlBQVl4RSxLQUFLQyxNQUM5QixrQkNqUEZ3RSxFQUFvQkMsRUFBSSxJQUFNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hyb21pYy8uL2FwcC9jb21wb25lbnRzL0NhbnZhcy9Ib21lL2luZGV4LmpzIiwid2VicGFjazovL2Nocm9taWMvd2VicGFjay9ydW50aW1lL2dldEZ1bGxIYXNoIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtYXAgZnJvbSBcImxvZGFzaC9tYXBcIjtcbmltcG9ydCB7IFBsYW5lLCBUcmFuc2Zvcm0gfSBmcm9tIFwib2dsXCI7XG5pbXBvcnQgZ3NhcCBmcm9tIFwiZ3NhcFwiO1xuaW1wb3J0IG5vcm1hbGl6ZVdoZWVsIGZyb20gXCJub3JtYWxpemUtd2hlZWxcIjtcblxuaW1wb3J0IE1lZGlhIGZyb20gXCIuL01lZGlhXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIb21lIHtcbiAgY29uc3RydWN0b3IoeyBnbCwgc2NlbmUsIHNpemVzIH0pIHtcbiAgICB0aGlzLmdsID0gZ2w7XG4gICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xuICAgIHRoaXMuZ3JvdXAgPSBuZXcgVHJhbnNmb3JtKCk7XG4gICAgdGhpcy5zaXplcyA9IHNpemVzO1xuXG4gICAgdGhpcy5nYWxsZXJ5RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaG9tZV9fZ2FsbGVyeVwiKTtcbiAgICB0aGlzLm1lZGlhRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICAgXCIuaG9tZV9fZ2FsbGVyeV9fbWVkaWFfX2ltYWdlXCIsXG4gICAgKTtcbiAgICB0aGlzLnggPSB7XG4gICAgICBjdXJyZW50OiAwLFxuICAgICAgdGFyZ2V0OiAwLFxuICAgICAgbGVycDogMC4xLFxuICAgICAgZGlyZWN0aW9uOiBudWxsLFxuICAgIH07XG4gICAgdGhpcy55ID0ge1xuICAgICAgY3VycmVudDogMCxcbiAgICAgIHRhcmdldDogMCxcbiAgICAgIGxlcnA6IDAuMSxcbiAgICAgIGRpcmVjdGlvbjogbnVsbCxcbiAgICB9O1xuXG4gICAgLy8gVXNlZCB0byBzYXZlIHRoZSBzY3JvbGwgeCBhbmQgeSBhZnRlciB0b3VjaGRvd24gZXZlbnRcbiAgICAvLyB0byBwcmV2ZW50IHJlZnJlc2hpbmcgdG8gemVyby5cbiAgICB0aGlzLnNjcm9sbEN1cnJlbnQgPSB7XG4gICAgICB4OiAwLFxuICAgICAgeTogMCxcbiAgICB9O1xuICAgIHRoaXMuc2Nyb2xsID0ge1xuICAgICAgeDogMCxcbiAgICAgIHk6IDAsXG4gICAgfTtcblxuICAgIC8vIFNwZWVkIG9mIHRoZSBtb3VzZSBkcmFnZ2luZ1xuICAgIHRoaXMuc3BlZWQgPSB7XG4gICAgICBjdXJyZW50OiAwLFxuICAgICAgdGFyZ2V0OiAwLFxuICAgICAgbGVycDogMC4xLFxuICAgIH07XG5cbiAgICB0aGlzLmNyZWF0ZUdlb21ldHJ5KCk7XG4gICAgdGhpcy5jcmVhdGVHYWxsZXJ5KCk7XG5cbiAgICB0aGlzLmdyb3VwLnNldFBhcmVudCh0aGlzLnNjZW5lKTtcbiAgICB0aGlzLnNob3coKTtcbiAgfVxuXG4gIGNyZWF0ZUdlb21ldHJ5KCkge1xuICAgIC8vIFRoZSBoZWlnaHRTZWdtZW50ICYgd2lkdGhTZWdtZW50IGdpdmVzIG1vcmUgdmVydGljZXMgdG8gdGhlIHBsYW5lXG4gICAgdGhpcy5nZW9tZXRyeSA9IG5ldyBQbGFuZSh0aGlzLmdsLCB7XG4gICAgICBoZWlnaHRTZWdtZW50czogMjAsXG4gICAgICB3aWR0aFNlZ21lbnRzOiAyMCxcbiAgICB9KTtcbiAgfVxuICBjcmVhdGVHYWxsZXJ5KCkge1xuICAgIHRoaXMubWVkaWFzID0gbWFwKHRoaXMubWVkaWFFbGVtZW50cywgKGVsZW1lbnQsIGluZGV4KSA9PiB7XG4gICAgICByZXR1cm4gbmV3IE1lZGlhKHtcbiAgICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgICBnZW9tZXRyeTogdGhpcy5nZW9tZXRyeSxcbiAgICAgICAgZ2w6IHRoaXMuZ2wsXG4gICAgICAgIHNjZW5lOiB0aGlzLmdyb3VwLFxuICAgICAgICBzaXplczogdGhpcy5zaXplcyxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgc2hvdygpIHtcbiAgICBtYXAodGhpcy5tZWRpYXMsIChtZWRpYSkgPT4ge1xuICAgICAgbWVkaWEuc2hvdygpO1xuICAgIH0pO1xuICB9XG5cbiAgaGlkZSgpIHtcbiAgICBtYXAodGhpcy5tZWRpYXMsIChtZWRpYSkgPT4ge1xuICAgICAgbWVkaWEuaGlkZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgb25SZXNpemUoZXZlbnQpIHtcbiAgICB0aGlzLmdhbGxlcnlCb3VuZHMgPSB0aGlzLmdhbGxlcnlFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHRoaXMuc2l6ZXMgPSBldmVudC5zaXplcztcbiAgICB0aGlzLmdhbGxlcnlTaXplcyA9IHtcbiAgICAgIHdpZHRoOiAodGhpcy5nYWxsZXJ5Qm91bmRzLndpZHRoIC8gd2luZG93LmlubmVyV2lkdGgpICogdGhpcy5zaXplcy53aWR0aCxcbiAgICAgIGhlaWdodDpcbiAgICAgICAgKHRoaXMuZ2FsbGVyeUJvdW5kcy5oZWlnaHQgLyB3aW5kb3cuaW5uZXJIZWlnaHQpICogdGhpcy5zaXplcy5oZWlnaHQsXG4gICAgfTtcblxuICAgIC8vIHRoaXMuc2Nyb2xsLnggPSB0aGlzLngudGFyZ2V0ID0gMDtcbiAgICAvLyB0aGlzLnNjcm9sbC55ID0gdGhpcy55LnRhcmdldCA9IDA7XG5cbiAgICBtYXAodGhpcy5tZWRpYXMsIChtZWRpYSkgPT4ge1xuICAgICAgbWVkaWEub25SZXNpemUoZXZlbnQsIHRoaXMuc2Nyb2xsKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuICAgKiBvblRvdWNoRG93biBmb3IgY2FudmFzXG4gICAqL1xuICBvblRvdWNoRG93bih7IHgsIHkgfSkge1xuICAgIHRoaXMuc2Nyb2xsQ3VycmVudC54ID0gdGhpcy5zY3JvbGwueDtcbiAgICB0aGlzLnNjcm9sbEN1cnJlbnQueSA9IHRoaXMuc2Nyb2xsLnk7XG4gIH1cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XG4gICAqIG9uVG91Y2hNb3ZlIGZvciBjYW52YXNcbiAgICovXG4gIG9uVG91Y2hNb3ZlKHsgeCwgeSB9KSB7XG4gICAgY29uc3QgeERpc3RhbmNlID0geC5zdGFydCAtIHguZW5kO1xuICAgIGNvbnN0IHlEaXN0YW5jZSA9IHkuc3RhcnQgLSB5LmVuZDtcblxuICAgIHRoaXMueC50YXJnZXQgPSB0aGlzLnNjcm9sbEN1cnJlbnQueCAtIHhEaXN0YW5jZTtcbiAgICB0aGlzLnkudGFyZ2V0ID0gdGhpcy5zY3JvbGxDdXJyZW50LnkgLSB5RGlzdGFuY2U7XG4gIH1cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XG4gICAqIG9uVG91Y2hVcCBmb3IgY2FudmFzXG4gICAqL1xuICBvblRvdWNoVXAoeyB4LCB5IH0pIHt9XG5cbiAgb25XaGVlbCh7IHBpeGVsWSwgcGl4ZWxYIH0pIHtcbiAgICB0aGlzLngudGFyZ2V0ICs9IHBpeGVsWDtcbiAgICB0aGlzLnkudGFyZ2V0ICs9IHBpeGVsWTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge3t4Om51bWJlciwgeTpudW1iZXJ9fSB7eCwgeX1cbiAgICogU2Nyb2xsIHVwZGF0ZVxuICAgKi9cbiAgdXBkYXRlKCkge1xuICAgIGlmICghdGhpcy5nYWxsZXJ5Qm91bmRzKSByZXR1cm47XG5cbiAgICAvLyBVc2luZyBweXRoYWdvcmFzIHRvIGdldCB0aGUgc3BlZWQgb2YgY3Vyc29yIG9yIHRvdWNoIG1vdmVtZW50IGZyb20gYSBjdXJyZW50XG4gICAgLy8gdG8gYSB0YXJnZXQgcG9zaXRpb25cbiAgICBjb25zdCBhID0gdGhpcy54LnRhcmdldCAtIHRoaXMueC5jdXJyZW50O1xuICAgIGNvbnN0IGIgPSB0aGlzLnkudGFyZ2V0IC0gdGhpcy55LmN1cnJlbnQ7XG4gICAgdGhpcy5zcGVlZC50YXJnZXQgPSBNYXRoLnNxcnQoYSAqIGEgKyBiICogYikgKiAwLjAwMTtcblxuICAgIHRoaXMuc3BlZWQuY3VycmVudCA9IGdzYXAudXRpbHMuaW50ZXJwb2xhdGUoXG4gICAgICB0aGlzLnNwZWVkLmN1cnJlbnQsXG4gICAgICB0aGlzLnNwZWVkLnRhcmdldCxcbiAgICAgIHRoaXMuc3BlZWQubGVycCxcbiAgICApO1xuXG4gICAgLy8gVGhpcyB1cGRhdGVzIHRoZSBjdXJyZW50IHBvc2l0aW9uIG9mIHNjcm9sbCB3aXRoIHRoZSB0YXJnZXQgYWZ0ZXIgc2Nyb2xsaW5nXG4gICAgdGhpcy54LmN1cnJlbnQgPSBnc2FwLnV0aWxzLmludGVycG9sYXRlKFxuICAgICAgdGhpcy54LmN1cnJlbnQsXG4gICAgICB0aGlzLngudGFyZ2V0LFxuICAgICAgdGhpcy54LmxlcnAsXG4gICAgKTtcbiAgICB0aGlzLnkuY3VycmVudCA9IGdzYXAudXRpbHMuaW50ZXJwb2xhdGUoXG4gICAgICB0aGlzLnkuY3VycmVudCxcbiAgICAgIHRoaXMueS50YXJnZXQsXG4gICAgICB0aGlzLnkubGVycCxcbiAgICApO1xuXG4gICAgLy8gQ2hlY2tzIHRoZSBzY3JvbGwgZGlyZWN0aW9uXG4gICAgaWYgKHRoaXMuc2Nyb2xsLnggPCB0aGlzLnguY3VycmVudCkge1xuICAgICAgdGhpcy54LmRpcmVjdGlvbiA9IFwicmlnaHRcIjtcbiAgICB9IGVsc2UgaWYgKHRoaXMuc2Nyb2xsLnggPiB0aGlzLnguY3VycmVudCkge1xuICAgICAgdGhpcy54LmRpcmVjdGlvbiA9IFwibGVmdFwiO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNjcm9sbC55IDwgdGhpcy55LmN1cnJlbnQpIHtcbiAgICAgIHRoaXMueS5kaXJlY3Rpb24gPSBcInRvcFwiO1xuICAgIH0gZWxzZSBpZiAodGhpcy5zY3JvbGwueSA+IHRoaXMueS5jdXJyZW50KSB7XG4gICAgICB0aGlzLnkuZGlyZWN0aW9uID0gXCJib3R0b21cIjtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGVzIHRoZSBzY3JvbGwgeCBhbmQgeSB3aXRoIHRoZSBjdXJyZW50IHggYW5kIHkgYWZ0ZXIgdGhleSBhcmUgdXBkYXRlZFxuICAgIHRoaXMuc2Nyb2xsLnggPSB0aGlzLnguY3VycmVudDtcbiAgICB0aGlzLnNjcm9sbC55ID0gdGhpcy55LmN1cnJlbnQ7XG5cbiAgICBtYXAodGhpcy5tZWRpYXMsIChtZWRpYSwgXykgPT4ge1xuICAgICAgY29uc3QgbWVzaFNjYWxlWCA9IG1lZGlhLm1lc2guc2NhbGUueCAvIDI7XG5cbiAgICAgIC8vIEluZmluaXRlIHNjcm9sbGluZyBpbiBhbnkgZGlyZWN0aW9uXG4gICAgICBpZiAodGhpcy54LmRpcmVjdGlvbiA9PT0gXCJsZWZ0XCIpIHtcbiAgICAgICAgY29uc3QgeCA9IG1lZGlhLm1lc2gucG9zaXRpb24ueCArIG1lc2hTY2FsZVg7XG4gICAgICAgIGlmICh4IDwgLXRoaXMuc2l6ZXMud2lkdGggLyAyKSB7XG4gICAgICAgICAgbWVkaWEuZXh0cmEueCArPSB0aGlzLmdhbGxlcnlTaXplcy53aWR0aDtcbiAgICAgICAgICBtZWRpYS5tZXNoLnJvdGF0aW9uLnogPSBnc2FwLnV0aWxzLnJhbmRvbShcbiAgICAgICAgICAgIC1NYXRoLlBJICogMC4wMyxcbiAgICAgICAgICAgIE1hdGguUEkgKiAwLjAzLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy54LmRpcmVjdGlvbiA9PT0gXCJyaWdodFwiKSB7XG4gICAgICAgIGNvbnN0IHggPSBtZWRpYS5tZXNoLnBvc2l0aW9uLnggLSBtZXNoU2NhbGVYO1xuXG4gICAgICAgIGlmICh4ID4gdGhpcy5zaXplcy53aWR0aCAvIDIpIHtcbiAgICAgICAgICBtZWRpYS5leHRyYS54IC09IHRoaXMuZ2FsbGVyeVNpemVzLndpZHRoO1xuICAgICAgICAgIG1lZGlhLm1lc2gucm90YXRpb24ueiA9IGdzYXAudXRpbHMucmFuZG9tKFxuICAgICAgICAgICAgLU1hdGguUEkgKiAwLjAzLFxuICAgICAgICAgICAgTWF0aC5QSSAqIDAuMDMsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBtZXNoU2NhbGVZID0gbWVkaWEubWVzaC5zY2FsZS55IC8gMjtcblxuICAgICAgaWYgKHRoaXMueS5kaXJlY3Rpb24gPT09IFwidG9wXCIpIHtcbiAgICAgICAgY29uc3QgeSA9IG1lZGlhLm1lc2gucG9zaXRpb24ueSArIG1lc2hTY2FsZVk7XG5cbiAgICAgICAgaWYgKHkgPCAtdGhpcy5zaXplcy5oZWlnaHQgLyAyKSB7XG4gICAgICAgICAgbWVkaWEuZXh0cmEueSArPSB0aGlzLmdhbGxlcnlTaXplcy5oZWlnaHQ7XG4gICAgICAgICAgbWVkaWEubWVzaC5yb3RhdGlvbi56ID0gZ3NhcC51dGlscy5yYW5kb20oXG4gICAgICAgICAgICAtTWF0aC5QSSAqIDAuMDMsXG4gICAgICAgICAgICBNYXRoLlBJICogMC4wMyxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMueS5kaXJlY3Rpb24gPT09IFwiYm90dG9tXCIpIHtcbiAgICAgICAgY29uc3QgeSA9IG1lZGlhLm1lc2gucG9zaXRpb24ueSAtIG1lc2hTY2FsZVk7XG5cbiAgICAgICAgaWYgKHkgPiB0aGlzLnNpemVzLmhlaWdodCAvIDIpIHtcbiAgICAgICAgICBtZWRpYS5leHRyYS55IC09IHRoaXMuZ2FsbGVyeVNpemVzLmhlaWdodDtcbiAgICAgICAgICBtZWRpYS5tZXNoLnJvdGF0aW9uLnogPSBnc2FwLnV0aWxzLnJhbmRvbShcbiAgICAgICAgICAgIC1NYXRoLlBJICogMC4wMyxcbiAgICAgICAgICAgIE1hdGguUEkgKiAwLjAzLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbWVkaWEudXBkYXRlKHRoaXMuc2Nyb2xsLCB0aGlzLnNwZWVkLmN1cnJlbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLnNjZW5lLnJlbW92ZUNoaWxkKHRoaXMuZ3JvdXApO1xuICB9XG59XG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSAoKSA9PiAoXCJlMmEwMWU2OTA1YThmN2FkNTQ3NlwiKSJdLCJuYW1lcyI6WyJIb21lIiwiY29uc3RydWN0b3IiLCJnbCIsInNjZW5lIiwic2l6ZXMiLCJ0aGlzIiwiZ3JvdXAiLCJUcmFuc2Zvcm0iLCJnYWxsZXJ5RWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm1lZGlhRWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwieCIsImN1cnJlbnQiLCJ0YXJnZXQiLCJsZXJwIiwiZGlyZWN0aW9uIiwieSIsInNjcm9sbEN1cnJlbnQiLCJzY3JvbGwiLCJzcGVlZCIsImNyZWF0ZUdlb21ldHJ5IiwiY3JlYXRlR2FsbGVyeSIsInNldFBhcmVudCIsInNob3ciLCJnZW9tZXRyeSIsIlBsYW5lIiwiaGVpZ2h0U2VnbWVudHMiLCJ3aWR0aFNlZ21lbnRzIiwibWVkaWFzIiwibWFwIiwiZWxlbWVudCIsImluZGV4IiwiTWVkaWEiLCJtZWRpYSIsImhpZGUiLCJvblJlc2l6ZSIsImV2ZW50IiwiZ2FsbGVyeUJvdW5kcyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImdhbGxlcnlTaXplcyIsIndpZHRoIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImhlaWdodCIsImlubmVySGVpZ2h0Iiwib25Ub3VjaERvd24iLCJvblRvdWNoTW92ZSIsInhEaXN0YW5jZSIsInN0YXJ0IiwiZW5kIiwieURpc3RhbmNlIiwib25Ub3VjaFVwIiwib25XaGVlbCIsInBpeGVsWSIsInBpeGVsWCIsInVwZGF0ZSIsImEiLCJiIiwiTWF0aCIsInNxcnQiLCJnc2FwIiwidXRpbHMiLCJpbnRlcnBvbGF0ZSIsIl8iLCJtZXNoU2NhbGVYIiwibWVzaCIsInNjYWxlIiwicG9zaXRpb24iLCJleHRyYSIsInJvdGF0aW9uIiwieiIsInJhbmRvbSIsIlBJIiwibWVzaFNjYWxlWSIsImRlc3Ryb3kiLCJyZW1vdmVDaGlsZCIsIl9fd2VicGFja19yZXF1aXJlX18iLCJoIl0sInNvdXJjZVJvb3QiOiIifQ==